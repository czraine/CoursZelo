{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/QuizService/quiz.service\";\nexport class AttemptComponent {\n  constructor(route, quizService) {\n    this.route = route;\n    this.quizService = quizService;\n    this.attempt = {\n      idAttempt: '',\n      quizId: '',\n      username: '',\n      attemptDate: new Date(),\n      responses: {},\n      score: 0 // Calculé à partir des réponses\n    };\n    this.studentResponses = {}; // Maps question ID to the student's selected option index\n    this.studentName = ''; // To hold the student's name\n    this.feedback = ''; // To hold any feedback from the student\n  }\n  ngOnInit() {\n    const quizId = this.route.snapshot.paramMap.get('id');\n    if (quizId) {\n      this.quizService.getQuizById(quizId).subscribe(data => {\n        this.quiz = data;\n        // Initialize responses for each question\n        this.quiz.questions.forEach(question => {\n          this.studentResponses[question.id] = -1; // -1 means no option selected\n        });\n      }, error => {\n        console.error('Error loading quiz', error);\n        // Handle loading error\n      });\n    } else {\n      console.error('Quiz ID not provided');\n      // Handle missing quiz ID error\n    }\n  }\n  selectAnswer(questionId, optionIndex) {\n    this.studentResponses[questionId] = optionIndex;\n  }\n  submitAttempt() {\n    const attemptData = {\n      quizId: this.quiz.id,\n      studentName: this.studentName,\n      responses: this.studentResponses,\n      feedback: this.feedback\n    };\n    console.log('Submitting the following attempt:', attemptData);\n    // Assuming your QuizService has a method to submit the attempt\n    this.quizService.submitAttempt(attemptData).subscribe(result => {\n      console.log('Quiz attempt submitted successfully:', result);\n      // Redirect to a confirmation page or display a success message\n    }, error => {\n      console.error('Error submitting quiz attempt:', error);\n      // Handle submission error\n    });\n  }\n  static #_ = this.ɵfac = function AttemptComponent_Factory(t) {\n    return new (t || AttemptComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.QuizService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AttemptComponent,\n    selectors: [[\"app-attempts\"]],\n    decls: 2,\n    vars: 0,\n    template: function AttemptComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"attempts works!\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhdHRlbXB0cy5jb21wb25lbnQuY3NzIn0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQXR0ZW1wdC9hdHRlbXB0cy9hdHRlbXB0cy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxvS0FBb0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":";;;AAYA,OAAM,MAAOA,gBAAgB;EAc3BC,YACUC,KAAqB,EACrBC,WAAwB;IADxB,KAAAD,KAAK,GAALA,KAAK;IACL,KAAAC,WAAW,GAAXA,WAAW;IAfrB,KAAAC,OAAO,GAAQ;MACbC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,IAAIC,IAAI,EAAE;MACvBC,SAAS,EAAE,EAAE;MACbC,KAAK,EAAE,CAAC,CAAC;KACV;IAED,KAAAC,gBAAgB,GAAqC,EAAE,CAAC,CAAC;IACzD,KAAAC,WAAW,GAAW,EAAE,CAAC,CAAC;IAC1B,KAAAC,QAAQ,GAAW,EAAE,CAAC,CAAC;EAKpB;EAEHC,QAAQA,CAAA;IACN,MAAMT,MAAM,GAAG,IAAI,CAACJ,KAAK,CAACc,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAC;IACrD,IAAIZ,MAAM,EAAE;MACV,IAAI,CAACH,WAAW,CAACgB,WAAW,CAACb,MAAM,CAAC,CAACc,SAAS,CAC3CC,IAAU,IAAI;QACb,IAAI,CAACC,IAAI,GAAGD,IAAI;QAChB;QACA,IAAI,CAACC,IAAI,CAACC,SAAS,CAACC,OAAO,CAACC,QAAQ,IAAG;UACrC,IAAI,CAACb,gBAAgB,CAACa,QAAQ,CAACC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC3C,CAAC,CAAC;MACJ,CAAC,EACAC,KAAK,IAAI;QACRC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;QAC1C;MACF,CAAC,CACF;KACF,MAAM;MACLC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAC;MACrC;;EAEJ;EAEAE,YAAYA,CAACC,UAAkB,EAAEC,WAAmB;IAClD,IAAI,CAACnB,gBAAgB,CAACkB,UAAU,CAAC,GAAGC,WAAW;EACjD;EAEAC,aAAaA,CAAA;IACX,MAAMC,WAAW,GAAG;MAClB3B,MAAM,EAAE,IAAI,CAACgB,IAAI,CAACI,EAAE;MACpBb,WAAW,EAAE,IAAI,CAACA,WAAW;MAC7BH,SAAS,EAAE,IAAI,CAACE,gBAAgB;MAChCE,QAAQ,EAAE,IAAI,CAACA;KAChB;IAEDc,OAAO,CAACM,GAAG,CAAC,mCAAmC,EAAED,WAAW,CAAC;IAC7D;IACA,IAAI,CAAC9B,WAAW,CAAC6B,aAAa,CAACC,WAAW,CAAC,CAACb,SAAS,CACnDe,MAAM,IAAG;MACPP,OAAO,CAACM,GAAG,CAAC,sCAAsC,EAAEC,MAAM,CAAC;MAC3D;IACF,CAAC,EACDR,KAAK,IAAG;MACNC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC,CACF;EACH;EAAC,QAAAS,CAAA;qBAjEUpC,gBAAgB,EAAAqC,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,WAAA;EAAA;EAAA,QAAAC,EAAA;UAAhB3C,gBAAgB;IAAA4C,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCZ7BZ,EAAA,CAAAc,cAAA,QAAG;QAAAd,EAAA,CAAAe,MAAA,sBAAe;QAAAf,EAAA,CAAAgB,YAAA,EAAI","names":["AttemptComponent","constructor","route","quizService","attempt","idAttempt","quizId","username","attemptDate","Date","responses","score","studentResponses","studentName","feedback","ngOnInit","snapshot","paramMap","get","getQuizById","subscribe","data","quiz","questions","forEach","question","id","error","console","selectAnswer","questionId","optionIndex","submitAttempt","attemptData","log","result","_","i0","ɵɵdirectiveInject","i1","ActivatedRoute","i2","QuizService","_2","selectors","decls","vars","template","AttemptComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sourceRoot":"","sources":["C:\\Users\\Rahma\\Desktop\\Testing\\CoursZeloFront\\CoursZelo\\src\\app\\Attempt\\attempts\\attempts.component.ts","C:\\Users\\Rahma\\Desktop\\Testing\\CoursZeloFront\\CoursZelo\\src\\app\\Attempt\\attempts\\attempts.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { QuizService } from 'src/app/QuizService/quiz.service';\r\ninterface Question {\r\n\r\n@Component({\r\n  selector: 'app-attempts',\r\n  templateUrl: './attempts.component.html',\r\n  styleUrls: ['./attempts.component.css']\r\n})\r\n\r\n\r\nexport class AttemptComponent implements OnInit {\r\n  attempt: any = {\r\n    idAttempt: '',\r\n    quizId: '',\r\n    username: '',\r\n    attemptDate: new Date(),\r\n    responses: {}, // Clé: ID de la question, Valeur: réponse donnée\r\n    score: 0 // Calculé à partir des réponses\r\n  };\r\n  quiz!: Quiz;\r\n  studentResponses: { [questionId: string]: number } = {}; // Maps question ID to the student's selected option index\r\n  studentName: string = ''; // To hold the student's name\r\n  feedback: string = ''; // To hold any feedback from the student\r\n\r\n  constructor(\r\n    private route: ActivatedRoute, \r\n    private quizService: QuizService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    const quizId = this.route.snapshot.paramMap.get('id');\r\n    if (quizId) {\r\n      this.quizService.getQuizById(quizId).subscribe(\r\n        (data: Quiz) => {\r\n          this.quiz = data;\r\n          // Initialize responses for each question\r\n          this.quiz.questions.forEach(question => {\r\n            this.studentResponses[question.id] = -1; // -1 means no option selected\r\n          });\r\n        },\r\n        (error) => {\r\n          console.error('Error loading quiz', error);\r\n          // Handle loading error\r\n        }\r\n      );\r\n    } else {\r\n      console.error('Quiz ID not provided');\r\n      // Handle missing quiz ID error\r\n    }\r\n  }\r\n\r\n  selectAnswer(questionId: string, optionIndex: number): void {\r\n    this.studentResponses[questionId] = optionIndex;\r\n  }\r\n\r\n  submitAttempt(): void {\r\n    const attemptData = {\r\n      quizId: this.quiz.id,\r\n      studentName: this.studentName,\r\n      responses: this.studentResponses,\r\n      feedback: this.feedback\r\n    };\r\n    \r\n    console.log('Submitting the following attempt:', attemptData);\r\n    // Assuming your QuizService has a method to submit the attempt\r\n    this.quizService.submitAttempt(attemptData).subscribe(\r\n      result => {\r\n        console.log('Quiz attempt submitted successfully:', result);\r\n        // Redirect to a confirmation page or display a success message\r\n      },\r\n      error => {\r\n        console.error('Error submitting quiz attempt:', error);\r\n        // Handle submission error\r\n      }\r\n    );\r\n  }\r\n}\r\n","<p>attempts works!</p>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}